import{aa as d,ac as t,aC as $,aD as j,u as v,I as D,j as e,B as u}from"./main-DsOtDJLA.js";import{b as x}from"./Page-CAopKRxs.js";import{C as h,a as F,b as A,c as b,d as T}from"./card-DTW4jan0.js";import{P as y}from"./plus-DxHMq-A-.js";import{T as f}from"./trash-Cfy35Une.js";const g=d({name:t(),description:t(),type:$(["message","session"]),initialValue:t(),measure:t()}),V=d({name:t(),description:t(),instructions:t().optional(),persona:d({role:t(),goals:t(),evaluations:g.array()}),user:d({role:t(),goals:t(),evaluations:g.array()})});d({id:t(),organizationId:t(),data:V,updatedAt:j(),createdAt:j()});const B=({defaultValues:S,onSubmit:C})=>{const a=v("ScenarioForm"),c=v("Actions"),i=D({defaultValues:{name:"",description:"",user:{evaluations:[{name:"",description:"",measure:"",initialValue:"",type:"message"}]},persona:{evaluations:[{name:"",description:"",measure:"",initialValue:"",type:"session"}]},...S},validators:{onSubmit:V},onSubmit:C});return e.jsx(i.AppForm,{children:e.jsxs("form",{onSubmit:l=>l.preventDefault(),className:"flex flex-col gap-4",children:[e.jsx(i.AppField,{name:"name",children:l=>e.jsx(l.TextField,{label:a.name})}),e.jsx(i.AppField,{name:"description",children:l=>e.jsx(l.TextAreaField,{label:a.description})}),e.jsx(i.AppField,{name:"instructions",children:l=>e.jsx(l.TextAreaField,{optional:!0,label:a.instructions.label,description:a.instructions.description})}),e.jsx(x,{title:a.user.title,description:a.user.description}),e.jsx(i.AppField,{name:"user.role",children:l=>e.jsx(l.TextAreaField,{label:a.role})}),e.jsx(i.AppField,{name:"user.goals",children:l=>e.jsx(l.TextAreaField,{label:a.goals})}),e.jsx(i.AppField,{name:"user.evaluations",mode:"array",children:l=>{var r,o;return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(x,{title:a.userEvaluations.title,description:a.userEvaluations.description,children:e.jsxs(u,{onClick:p=>{p.preventDefault(),l.pushValue({name:"",description:"",type:"message",measure:"",initialValue:""})},children:[e.jsx(y,{}),c.create]})}),(o=(r=l.state)==null?void 0:r.value)==null?void 0:o.map((p,n)=>e.jsxs(h,{children:[e.jsxs(F,{children:[e.jsxs(A,{children:[a.evaluation," ",n+1]}),e.jsx(b,{children:e.jsxs(u,{onClick:s=>{s.preventDefault(),l.removeValue(n)},variant:"secondary",size:"sm",children:[e.jsx(f,{}),c.delete]})})]}),e.jsxs(T,{className:"flex flex-col gap-4",children:[e.jsx(i.AppField,{name:`user.evaluations[${n}].name`,children:s=>e.jsx("div",{className:"flex-1",children:e.jsx(s.TextField,{label:a.name})})}),e.jsx(i.AppField,{name:`user.evaluations[${n}].description`,children:s=>e.jsx(s.TextAreaField,{label:a.description})}),e.jsx(i.AppField,{name:`user.evaluations[${n}].type`,children:s=>e.jsx(s.SelectField,{label:a.evaluationType.title,description:a.evaluationType.description,options:[{label:a.evaluationType.message,value:"message"},{label:a.evaluationType.session,value:"session"}]})}),e.jsx(i.Subscribe,{selector:s=>[s.values.user.evaluations[n].type],children:([s])=>s==="session"&&e.jsx(i.AppField,{name:`user.evaluations[${n}].initialValue`,children:m=>e.jsx(m.TextField,{label:a.initialValue.title,description:a.initialValue.description})})}),e.jsx(i.AppField,{name:`user.evaluations[${n}].measure`,children:s=>e.jsx(s.TextField,{label:a.evaluationMeasure.title,description:a.evaluationMeasure.description})})]})]},n))]})}}),e.jsx(x,{title:a.persona.title,description:a.persona.description}),e.jsx(i.AppField,{name:"persona.role",children:l=>e.jsx(l.TextAreaField,{label:a.role})}),e.jsx(i.AppField,{name:"persona.goals",children:l=>e.jsx(l.TextAreaField,{label:a.goals})}),e.jsx(i.AppField,{name:"persona.evaluations",mode:"array",children:l=>{var r,o;return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(x,{title:a.personaEvaluations.title,description:a.personaEvaluations.description,children:e.jsxs(u,{onClick:p=>{p.preventDefault(),l.pushValue({name:"",description:"",measure:"",initialValue:"",type:"session"})},children:[e.jsx(y,{}),c.create]})}),(o=(r=l.state)==null?void 0:r.value)==null?void 0:o.map((p,n)=>e.jsxs(h,{children:[e.jsxs(F,{children:[e.jsxs(A,{children:[a.evaluation," ",n+1]}),e.jsx(b,{children:e.jsxs(u,{onClick:s=>{s.preventDefault(),l.removeValue(n)},variant:"secondary",size:"sm",children:[e.jsx(f,{}),c.delete]})})]}),e.jsxs(T,{className:"flex flex-col gap-4",children:[e.jsx(i.AppField,{name:`persona.evaluations[${n}].name`,children:s=>e.jsx("div",{className:"flex-1",children:e.jsx(s.TextField,{label:a.name})})}),e.jsx(i.AppField,{name:`persona.evaluations[${n}].description`,children:s=>e.jsx(s.TextAreaField,{label:a.description})}),e.jsx(i.AppField,{name:`persona.evaluations[${n}].type`,children:s=>e.jsx(s.SelectField,{label:a.evaluationType.title,description:a.evaluationType.description,options:[{label:a.evaluationType.message,value:"message"},{label:a.evaluationType.session,value:"session"}]})}),e.jsx(i.Subscribe,{selector:s=>[s.values.persona.evaluations[n].type],children:([s])=>s==="session"&&e.jsx(i.AppField,{name:`persona.evaluations[${n}].initialValue`,children:m=>e.jsx(m.TextField,{label:a.initialValue.title,description:a.initialValue.description})})}),e.jsx(i.AppField,{name:`persona.evaluations[${n}].measure`,children:s=>e.jsx(s.TextField,{label:a.evaluationMeasure.title,description:a.evaluationMeasure.description})})]})]},n))]})}}),e.jsx(i.SubmitButton,{})]})})};export{B as S};
