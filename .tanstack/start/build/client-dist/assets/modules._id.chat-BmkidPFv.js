import{r as i,aq as u,j as d}from"./main-DsOtDJLA.js";import{C as p}from"./Chat-DVNWa1uC.js";import"./index-C_CEyp_5.js";import"./chevrons-up-down-LGjGe9u3.js";const m=()=>`scorm_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,l=()=>{const[c,s]=i.useState([]),n=async(t,a)=>{const e={type:"scorm",id:m(),method:t,parameter:a};s(o=>o.concat({event:e,response:null})),window.parent.postMessage(e,"*")};return i.useEffect(()=>{window.addEventListener("message",t=>{t.data.type==="scorm-response"&&s(a=>a.map(e=>e.event.id===t.data.id?{...e,response:t.data}:e))})},[]),{sendEvent:n,messages:c}},S=function(){var e,o;const{chatModule:s}=u.useLoaderData(),{sendEvent:n,messages:t}=l();i.useEffect(()=>{n("LMSInitialize"),n("LMSGetValue","cmi.core.suspend_data")},[]),console.log(t);const a=((o=(e=t.find(r=>r.event.method==="LMSGetValue"&&r.response))==null?void 0:e.response)==null?void 0:o.result)||"[]";return d.jsx("div",{className:"p-8 h-screen max-w-2xl w-full mx-auto",children:d.jsx(p,{initialMessages:JSON.parse(a),scenarioId:s.data.scenarioId,personaId:s.data.personaIds[Math.floor(Math.random()*s.data.personaIds.length)],contextIds:s.data.contextIds,instructions:s.instructions,onChange:r=>{n("LMSSetValue",{element:"cmi.core.suspend_data",value:JSON.stringify(r)})}})})};export{S as component};
